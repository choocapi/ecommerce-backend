server:
  port: 8080
  # Add a context path to urls. e.g. http://localhost:8080/api/v1/products
  # Useful for microservices
  servlet:
    context-path: /api/v1

spring:
  datasource:
    url: ${DB_URL}
    # username: ${DB_USERNAME}
    # password: ${DB_PASSWORD}
    driver-class-name: org.postgresql.Driver
    hikari:
      # Connection pool configuration
      maximum-pool-size: 10
      minimum-idle: 2
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      # Evict connections on SQL errors to prevent cached plan issues
      connection-test-query: SELECT 1
      leak-detection-threshold: 60000
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            scope:
              - openid
              - profile
              - email
  jpa:
    hibernate:
      ddl-auto: update
    # show-sql: true
    properties:
      hibernate:
        # Clear cache on schema changes
        jdbc:
          batch_size: 20
  transaction:
    default-timeout: 30
    rollback-on-commit-failure: true
  mail:
    host: smtp.gmail.com
    port: 587
    username: ${MAIL_USERNAME}
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
  ai:
    openai:
      api-key: ${OPENAI_API_KEY}
      base-url: ${OPENAI_BASE_URL}
      chat:
        options:
          model: ${OPENAI_MODEL}
          temperature: 0.4

seed-data:
  admin-email: ${ADMIN_EMAIL}

jwt:
  singer-key: ${JWT_SINGER_KEY}
  access-token-duration: ${JWT_ACCESS_TOKEN_DURATION} # in minutes
  refresh-token-duration: ${JWT_REFRESH_TOKEN_DURATION} # in days

cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS}

email:
  token-expiry-minutes:
    verify: 60
    reset: 30

vnpay:
  pay-url: https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
  api-url: https://sandbox.vnpayment.vn/merchant_webapi/api/transaction
  tmn-code: ${VNPAY_TMN_CODE}
  secret-key: ${VNPAY_SECRET_KEY}
  return-url: ${VNPAY_RETURN_URL}

momo:
  partner-code: ${MOMO_PARTNER_CODE}
  access-key: ${MOMO_ACCESS_KEY}
  secret-key: ${MOMO_SECRET_KEY}
  redirect-url: ${MOMO_REDIRECT_URL}
  ipn-url: ${MOMO_IPN_URL}
  api-url: https://test-payment.momo.vn/v2/gateway/api/create
  request-type: payWithMethod

zalopay:
  app-id: ${ZALOPAY_APP_ID}
  key1: ${ZALOPAY_KEY1}
  key2: ${ZALOPAY_KEY2}
  endpoint: https://sb-openapi.zalopay.vn/v2/create
  orderstatus: https://sb-openapi.zalopay.vn/v2/query
  callback-url: ${ZALOPAY_CALLBACK_URL}

app:
  base-url: ${BASE_URL:http://localhost:8080}
  frontend-url: ${FRONTEND_URL}
